<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Insurance Prediction</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-car icon"></i> Vehicle Insurance Prediction</h1>
            <p class="subtitle">
                <i class="fas fa-shield-alt"></i>
                AI-Powered Insurance Risk Assessment
            </p>
        </div>

        <form method="post" action="/" id="predictionForm">
            <div class="form-grid">
                <div class="form-group">
                    <label for="Gender"><i class="fas fa-user"></i> Gender(1:MALE, 0:FEMALE)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="gender_male" name="Gender" value="1" 
                                {% if (request.form.Gender == '1') or (form_data and form_data.Gender == '1') %}checked{% endif %} required>
                            <label for="gender_male">Male</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="gender_female" name="Gender" value="0" 
                                {% if (request.form.Gender == '0') or (form_data and form_data.Gender == '0') %}checked{% endif %} required>
                            <label for="gender_female">Female</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Age"><i class="fas fa-calendar-alt"></i> Age</label>
                    <input type="number" id="Age" name="Age" min="18" max="100" 
                        value="{{ (request.form.Age) or (form_data.Age if form_data else '') }}" required placeholder="Enter your age">
                </div>

                <div class="form-group">
                    <label for="Driving_License"><i class="fas fa-id-card"></i> Driving License (0:NO, 1:YES)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="license_yes" name="Driving_License" value="1" 
                                {% if request.form.Driving_License == '1' %}checked{% endif %} required>
                            <label for="license_yes">Yes</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="license_no" name="Driving_License" value="0" 
                                {% if request.form.Driving_License == '0' %}checked{% endif %} required>
                            <label for="license_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Region_Code"><i class="fas fa-map-marker-alt"></i> Region Code</label>
                    <input type="number" step="0.01" id="Region_Code" name="Region_Code" 
                        value="{{ request.form.Region_Code or '' }}" required placeholder="Enter region code">
                </div>

                <div class="form-group">
                    <label for="Previously_Insured"><i class="fas fa-history"></i> Previously Insured(0:NO, 1:YES)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="prev_yes" name="Previously_Insured" value="1" 
                                {% if request.form.Previously_Insured == '1' %}checked{% endif %} required>
                            <label for="prev_yes">Yes</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="prev_no" name="Previously_Insured" value="0" 
                                {% if request.form.Previously_Insured == '0' %}checked{% endif %} required>
                            <label for="prev_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Annual_Premium"><i class="fas fa-dollar-sign"></i> Annual Premium</label>
                    <input type="number" step="0.01" id="Annual_Premium" name="Annual_Premium" 
                        value="{{ request.form.Annual_Premium or '' }}" required placeholder="Enter annual premium">
                </div>

                <div class="form-group">
                    <label for="Policy_Sales_Channel"><i class="fas fa-store"></i> Policy Sales Channel</label>
                    <input type="number" step="0.01" id="Policy_Sales_Channel" name="Policy_Sales_Channel" 
                        value="{{ request.form.Policy_Sales_Channel or '' }}" required placeholder="Enter sales channel">
                </div>

                <div class="form-group">
                    <label for="Vintage"><i class="fas fa-clock"></i> Vintage (Days)</label>
                    <input type="number" id="Vintage" name="Vintage" 
                        value="{{ request.form.Vintage or '' }}" required placeholder="Enter vintage in days">
                </div>

                <div class="form-group">
                    <label for="Vehicle_Age_lt_1_Year"><i class="fas fa-car-side"></i> Vehicle Age < 1 Year(0:NO, 1:YES)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="age_lt1_yes" name="Vehicle_Age_lt_1_Year" value="1" 
                                {% if request.form.Vehicle_Age_lt_1_Year == '1' %}checked{% endif %} required>
                            <label for="age_lt1_yes">Yes</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="age_lt1_no" name="Vehicle_Age_lt_1_Year" value="0" 
                                {% if request.form.Vehicle_Age_lt_1_Year == '0' %}checked{% endif %} required>
                            <label for="age_lt1_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Vehicle_Age_gt_2_Years"><i class="fas fa-car"></i> Vehicle Age > 2 Years(0:NO, 1:YES)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="age_gt2_yes" name="Vehicle_Age_gt_2_Years" value="1" 
                                {% if request.form.Vehicle_Age_gt_2_Years == '1' %}checked{% endif %} required>
                            <label for="age_gt2_yes">Yes</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="age_gt2_no" name="Vehicle_Age_gt_2_Years" value="0" 
                                {% if request.form.Vehicle_Age_gt_2_Years == '0' %}checked{% endif %} required>
                            <label for="age_gt2_no">No</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Vehicle_Damage_Yes"><i class="fas fa-exclamation-triangle"></i> Vehicle Damage(0:NO, 1:YES)</label>
                    <div class="binary-input">
                        <div class="binary-option">
                            <input type="radio" id="damage_yes" name="Vehicle_Damage_Yes" value="1" 
                                {% if request.form.Vehicle_Damage_Yes == '1' %}checked{% endif %} required>
                            <label for="damage_yes">Yes</label>
                        </div>
                        <div class="binary-option">
                            <input type="radio" id="damage_no" name="Vehicle_Damage_Yes" value="0" 
                                {% if request.form.Vehicle_Damage_Yes == '0' %}checked{% endif %} required>
                            <label for="damage_no">No</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button type="submit" class="btn btn-predict" id="predictBtn">
                    <i class="fas fa-chart-line"></i>
                    Get Prediction
                </button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <span>Processing prediction...</span>
            </div>
        </form>

        <form method="get" action="/train" style="margin-top: 15px;">
            <div class="action-buttons">
                <button type="submit" class="btn btn-train">
                    <i class="fas fa-cogs"></i>
                    Train Model
                </button>
            </div>
        </form>

        {% if context %}
        <div class="result">
            <h2><i class="fas fa-chart-bar"></i> Prediction Result</h2>
            <div class="prediction-value">{{ context }}</div>
            <p>Insurance recommendation based on AI analysis</p>
        </div>
        {% endif %}
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', function() {
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('predictBtn').disabled = true;
            document.getElementById('predictBtn').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        });

        // Add smooth animations
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });

        // Re-enable button if page loads with result
        window.addEventListener('load', function() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('predictBtn').disabled = false;
            document.getElementById('predictBtn').innerHTML = '<i class="fas fa-chart-line"></i> Get Prediction';
        });
    </script>
</body>
</html>